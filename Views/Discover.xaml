<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="BouncyCat.Views.Discover"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BouncyCat"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tool="using:CommunityToolkit.WinUI.Controls"
    xmlns:obj="using:BouncyCat.Objects"
    xmlns:ic="using:FluentIcons.WinUI"
    xmlns:lab="using:CommunityToolkit.Labs.WinUI"
    xmlns:ry="using:Richasy.WinUIKernel.Share.Base"
    xmlns:vm="using:BouncyCat.ViewModels"
    mc:Ignorable="d">


    <SplitView x:Name="Wrapper" PanePlacement="Right" DisplayMode="Overlay" IsPaneOpen="False"  PaneBackground="Transparent">
        <SplitView.Pane>
            <Grid  Margin="15" Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}" CornerRadius="12">

                <TextBlock Text="测试" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
            </Grid>

        </SplitView.Pane>
        <SplitView.Content>
            <Grid x:Name="RootGrid">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" MinHeight="60"></RowDefinition>
                    <RowDefinition Height="12*"></RowDefinition>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="{x:Bind ViewModel.FirstColumnWidth,Mode=OneWay}" x:Name="Fc"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="7*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <!-- 使用最小宽度作为sizer的绑定值-->
                <ry:ColumnSplitter  Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" MaxColumnWidth="500" MinColumnWidth="320" ColumnWidth="{x:Bind Fc.MinWidth,Mode=TwoWay}" IsHideButtonEnabled="True" IsInvertDirection="False" IsEnabled="True" AlwaysShowButtonWhenCollapsed="True" IsHide="{x:Bind ViewModel.IsHided,Mode=TwoWay}"></ry:ColumnSplitter>
                <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Height="1" BorderThickness="1" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"></Border>

                <TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center" Text="搜索筛选" FontWeight="Bold" Margin="15,0,0,0"></TextBlock>
                <Grid Grid.Row="1" Grid.Column="0" RowSpacing="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="1"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Vertical" Spacing="5">
                        <tool:RangeSelector RangeStart="2" RangeEnd="4" Minimum="0" Maximum="5" StepFrequency="1" Margin="10"></tool:RangeSelector>
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Text="热度范围2-4" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                    </StackPanel>
                    <Border Grid.Row="1"  VerticalAlignment="Center" HorizontalAlignment="Stretch" Height="1" BorderThickness="1" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"></Border>
                    <ScrollViewer Grid.Row="2">
                        <ItemsRepeater  x:Name="SectionList" ItemsSource="{x:Bind ViewModel.Sections}">
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate x:DataType="obj:GameSection">
                                    <HyperlinkButton BorderThickness="0" CornerRadius="0" HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch">
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"></ColumnDefinition>
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                <ColumnDefinition Width="30"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox Grid.Column="0" IsChecked="False"></CheckBox>

                                            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10">
                                                <TextBlock VerticalAlignment="Center" Text="{Binding Name,Mode=OneWay}" FontSize="13"></TextBlock>
                                                <TextBlock VerticalAlignment="Center" Text="{Binding Count,Mode=OneWay}" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></TextBlock>
                                            </StackPanel>
                                            <FontIcon Grid.Column="2" Glyph="&#xF16D;" Foreground="{ThemeResource TextFillColorSecondaryBrush}"></FontIcon>
                                        </Grid>
                                    </HyperlinkButton>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </ScrollViewer>

                </Grid>
                <ToggleButton Grid.Row="0" Grid.Column="2" x:Name="st" Checked="st_Checked" Content="开关" Margin="15,0,0,0"></ToggleButton>
                <ComboBox Grid.Row="0" Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="15,0,15,0" PlaceholderText="最近更新"></ComboBox>
                <ScrollViewer Grid.Row="1" Grid.Column="2" >
                    <ItemsRepeater  x:Name="GameList" ItemsSource="{x:Bind ViewModel.Games}" Margin="30" >
                        <ItemsRepeater.Layout>
                            <tool:StaggeredLayout ColumnSpacing="15" RowSpacing="20" ItemsStretch="Fill"></tool:StaggeredLayout>
                        </ItemsRepeater.Layout>
                        <ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="obj:Game">
                                <Button BorderThickness="0" CornerRadius="6" Padding="0">
                                    
                                    <Grid Width="260" Height="160">
                                        <Image Source="/Assets/test.jpg" Stretch="UniformToFill"></Image>
                                    </Grid>
                                </Button>
                            </DataTemplate>
                        </ItemsRepeater.ItemTemplate>
                    </ItemsRepeater>
                </ScrollViewer>

            </Grid>
        </SplitView.Content>
    </SplitView>
    
</Page>
